<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | @alexvv13/tpapi</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Api to fetch themepark data, such as queues, operating hours etc"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@alexvv13/tpapi"><meta property="twitter:description" content="Api to fetch themepark data, such as queues, operating hours etc"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/AlexVV13/tp-api"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/configBase.js~ConfigBase.html">ConfigBase</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCache">getCache</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parseConfig">parseConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reusePromise">reusePromise</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reusePromiseForever">reusePromiseForever</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#cache">cache</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/cache/cacheBase.js~CacheBase.html">CacheBase</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/cache/cacheLevel.js~CacheLevel.html">CacheLevel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/cache/cacheMemory.js~CacheMemory.html">CacheMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/cache/scopedCache.js~ScopedCache.html">ScopedCache</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#parks">parks</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/parks/entity.js~Entity.html">Entity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/parks/park.js~Park.html">Park</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#parks-efteling">parks/efteling</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/parks/efteling/efteling.js~Efteling.html">Efteling</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#parks-europapark">parks/europapark</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/parks/europapark/europapark.js~EuropaPark.html">EuropaPark</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#parks-walibi">parks/walibi</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/parks/walibi/walibibelgium.js~WalibiBelgium.html">WalibiBelgium</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/parks/walibi/walibiholland.js~WalibiHolland.html">WalibiHolland</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="themeparks-api">Themeparks-API</h1><p>Themeparks API loosely based on existing examples, however I wanted to kill some time and then this came up. Don&apos;t expect anything too cool tho.<br></p>
<p><img src="https://github.com/alexvv13/tp-api/workflows/Unit%20Test/badge.svg" alt="Unit Test">
<img src="https://github.com/alexvv13/tp-api/workflows/ESDoc/badge.svg" alt="Documentation Build">
<img src="https://github.com/alexvv13/tp-api/workflows/Node.js%20CI/badge.svg" alt="Node.js CI">
<a href="https://travis-ci.com/alexvv13/tp-api"><img src="https://api.travis-ci.com/alexvv13/tp-api.svg?branch=master" alt="Build Status"></a> <br></p>
<p><img src="https://img.shields.io/node/v/@alexvv13/tpapi" alt="node-current">
<a href="https://badge.fury.io/js/%40alexvv13%2Ftpapi"><img src="https://badge.fury.io/js/%40alexvv13%2Ftpapi.svg" alt="npm version"></a> <br></p>
<p><img src="https://img.shields.io/snyk/vulnerabilities/github/alexvv13/tp-api.svg" alt="Snyk Vulnerabilities for GitHub Repo"> <br></p>
<p><a href="https://alexvv13.github.io/tp-api" title="API Documentation">API documentation</a> <br>
<a href="https://www.npmjs.com/package/@alexvv13/tpapi" title="NPM Package">NPM Package</a> <br></p>
<h2 id="about">About</h2><p>This is a module which fetches queue times and operating hours, and returns it as JSON to the user, the data could be used for anything, a website, a discordjs bot, some personal stuff or whatever. Be aware it&apos;s not perfect, but it works. It&apos;s just being build to work and return data, not to be efficient anyway.</p>
<h2 id="table-of-contents">Table of Contents</h2><p><a href="#about">About</a><br>
<a href="#table-of-contents">Table of Contents</a> <br>
<a href="#install">Install</a> <br>
<a href="#env">ENV</a> <br>
<a href="#usage">Usage</a> <br>
<a href="#running-the-script">  -Running the script</a> <br>
<a href="#example-output">  -Example output</a> <br>
<a href="#changelog">Changelog</a> <br>
<a href="#parks-available">Parks available</a> <br>
<a href="#features-of-the-parks">Features of supported parks</a> <br>
<a href="#result-objects">Result objects</a> <br>
<a href="#ride-waittimes">  -Ride waittimes</a> <br>
<a href="#schedules">  -Schedules</a> <br>
<a href="#park-object-values">Park object values</a> <br>
<a href="#tasks">Tasks</a> <br></p>
<h2 id="install">Install</h2><pre><code><code class="source-code prettyprint">npm install @alexvv13/tpapi --save</code>
</code></pre><h2 id="env">ENV</h2><p>In the directory where you&apos;re using tpapi, create an .env file and fill in the fields, an example can be found in the Github Repo, or in the ${path}/node_modules/@alexvv13/tpapi/.env.example, or copy below&apos;s example and fill in the fields yourself</p>
<pre><code><code class="source-code prettyprint">LANGUAGES= &apos;en&apos;
LANG_UPPER= &apos;EN&apos;

EFTELING_API_KEY= 
EFTELING_APP_VERSION= 
EFTELING_API_VERSION= 
EFTELING_API_PLATFORM= 

EFTELING_SEARCH_URL= 
EFTELING_WAITTIMES_URL= 
EFTELING_HIST_URL= 

EUROPAPARK_APIBASE= 
EUROPAPARK_LOGINSTRING= 
EUROPAPARK_LOGIN= 
EUROPAPARK_REFRESH= 

WALIBIHOLLAND_APIBASE= 
WALIBIHOLLAND_APIURL= 
WALIBIBELGIUM_APIBASE=
WALIBIRA_APIBASE=</code>
</code></pre><h2 id="usage">Usage</h2><h3 id="running-the-script">Running the script</h3><p>Run index.js for all parks <br>
NOTE: If you use commonjs, it&apos;s REQUIRED to use the .mjs extension INSTEAD of .js! <br>
Or create an .js file for yourself and do the following: <br></p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// Import all parks here
import tpapi from &apos;@alexvv13/tpapi&apos;;

const park = new tpapi.parks.Efteling();

// Fetch POIS Example usage of Efteling
park.getWaitTime().then((poiData) =&gt; {
  console.log(poiData);
});

// You can also call getCalendar() or getData()</code>
</code></pre>
<h3 id="example-output">Example output</h3><p>(Shortened to keep it readable)</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">{
  &quot;name&quot;: &quot;Stoomcarrousel&quot;,
  &quot;id&quot;: &quot;Efteling_stoomcarrousel&quot;,
  &quot;waitTime&quot;: &quot;0&quot;,
  &quot;state&quot;: &quot;Closed&quot;,
  &quot;active&quot;: &quot;false&quot;,
  &quot;location&quot;: {
    &quot;area&quot;: &quot;Marerijk&quot;,
    &quot;latitude&quot;: &quot;51.651211&quot;,
    &quot;longitude&quot;: &quot;5.048955&quot;
  },
  &quot;meta&quot;: {
    &quot;category&quot;: [
      &quot;youngest-ones&quot;,
      &quot;whole-family&quot;
    ],
    &quot;label&quot;: null,
    &quot;description&quot;: &quot;&lt;p&gt;Would you like a horse, a carriage, a pig or another vehicle? Take your seat in the &#x2018;Stoomcarrousel&#x2019; steam carousell, which is more than 100 years old, and lit it spin you around! Duration: varies.   Wheelchair access: via the exit from this attraction.&lt;/p&gt;&quot;,
    &quot;short_description&quot;: &quot;The old-fashioned fairground feeling&quot;,
    &quot;type&quot;: &quot;attraction&quot;,
    &quot;single_rider&quot;: &quot;false&quot;,
    &quot;fastPass&quot;: &quot;false&quot;,
    &quot;tags&quot;: [
      &quot;nophysicalhelp2&quot;,
      &quot;redwhitezones&quot;,
      &quot;placesallocated&quot;,
      &quot;leavingearlynotpossible2&quot;,
      &quot;transfernecessary&quot;,
      &quot;100undersupervision&quot;,
      &quot;indoorattraction&quot;,
      &quot;assistancedogs&quot;
    ]
  }
},
{
  &quot;name&quot;: &quot;Vogel Rok&quot;,
  &quot;id&quot;: &quot;Efteling_vogelrok&quot;,
  &quot;waitTime&quot;: &quot;0&quot;,
  &quot;state&quot;: &quot;Closed&quot;,
  &quot;active&quot;: &quot;false&quot;,
  &quot;location&quot;: {
    &quot;area&quot;: &quot;Reizenrijk&quot;,
    &quot;latitude&quot;: &quot;51.652187&quot;,
    &quot;longitude&quot;: &quot;5.052811&quot;
  },
  &quot;meta&quot;: {
    &quot;category&quot;: [
      &quot;thrillseekers&quot;
    ],
    &quot;label&quot;: null,
    &quot;description&quot;: &quot;&lt;p&gt;The Vogel Rok is an exiting indoor rollercoaster in the dark. The rollercoaster does not completely turn over, but does zoom through the dark at 40 mph. You must be at least 1.20 meter tall for this attraction. Duration: almost 2 minutes.   Wheelchair access: via the usual entrance to this attraction until the bottom of the stairs. Call here. An employee will then come to meet you.&lt;/p&gt;&quot;,
    &quot;short_description&quot;: &quot;Lightning in the dark&quot;,
    &quot;type&quot;: &quot;attraction&quot;,
    &quot;single_rider&quot;: &quot;false&quot;,
    &quot;fastPass&quot;: &quot;false&quot;,
    &quot;tags&quot;: [
      &quot;nophysicalhelp2&quot;,
      &quot;redwhitezones&quot;,
      &quot;placesallocated&quot;,
      &quot;leavingearlynotpossible2&quot;,
      &quot;transfernecessary&quot;,
      &quot;minimum120&quot;,
      &quot;pregnantwomen&quot;,
      &quot;injuries&quot;,
      &quot;dizzy&quot;,
      &quot;indoorattraction&quot;
    ]
  }
}</code>
</code></pre>
<h2 id="changelog">Changelog</h2><p><a href="CHANGELOG.md">View tp-api Changelog</a></p>
<h2 id="parks-available">Parks available</h2><p><!-- START_SUPPORTED_PARKS_LIST -->
</p>
<p><strong>3</strong> Parks Supported</p>
<ul>
<li>Efteling (tpapi.parks.Efteling)</li>
<li>Europa-Park (tpapi.parks.EuropaPark)</li>
<li>Walibi Holland (tpapi.parks.WalibiHolland)</li>
<li>Walibi Belgium (tpapi.parks.WalibiBelgium)</li>
</ul>
<p><!-- END_SUPPORTED_PARKS_LIST -->
</p>
<h2 id="features-of-the-parks">Features of the parks</h2><table>
<thead>
<tr>
<th>Park Name</th>
<th>Live Queues</th>
<th>Park Hours</th>
</tr>
</thead>
<tbody>
<tr>
<td>Efteling</td>
<td>:heavy_check_mark:</td>
<td>:heavy_check_mark:</td>
</tr>
<tr>
<td>Europa-Park</td>
<td>:heavy_check_mark:</td>
<td>:heavy_multiplication_x:</td>
</tr>
<tr>
<td>Walibi Holland</td>
<td>:heavy_check_mark:</td>
<td>:heavy_multiplication_x:</td>
</tr>
<tr>
<td>Walibi Belgium</td>
<td>:heavy_check_mark:</td>
<td>:heavy_multiplication_x:</td>
</tr>
</tbody>
</table>
<h2 id="result-objects">Result Objects</h2><h3 id="ride-waittimes">Ride WaitTimes</h3><pre><code><code class="source-code prettyprint">[
    {
        id: (string or number: uniquely identifying a ride),
        name: (string: ride name),
        waitTime: (number: current wait time in minutes),
        active: (bool: is the ride currently active?),
        location: (object: contains location data such as latlon
             latitude: (number: ride&apos;s latitude),
             longitude: (number: ride&apos;s longitude),
        meta: { (object: can contain various park-specific information about this ride - field may be null)
            // examples of potential meta fields
            single_rider: (boolean: does this ride have a single rider line?),
            type: (string: what is this poi?),
            fastPass: (boolean: does this ride have a fastPass line?),
            isVirtQueue: (boolean: is this entity a Virtual Queue?),
            area: (string: section of the park this ride is located within),
            tags: { (object: can contain various ride-specific tags, can be null and fields differ per park)
            },
            restrictions: { (object: can contain various ride-specific restrictions(minHeight etc), can be null and fields differ per park)
            },
        },
        status: (string: will either be &quot;Operating&quot;, &quot;Closed&quot;, &quot;Refurbishment&quot;, or &quot;Down&quot;),
    },
    ...
]</code>
</code></pre><h3 id="schedules">Schedules</h3><pre><code><code class="source-code prettyprint">[
    {
        date: (dateFormat timestamp: day this schedule applies),
        openingTime: (timeFormat timestamp: opening time for requested park - can be null if park is closed),
        closingTime: (timeFormat timestamp: closing time for requested park - can be null if park is closed),
        type: (string: &quot;Operating&quot; or &quot;Closed&quot;),
        special: [ (array of &quot;special&quot; times for this day, usually Disney Extra Magic Hours or similar at other parks - field may be null)
          openingTime: (timeFormat timestamp: opening time for requested park),
          closingTime: (timeFormat timestamp: closing time for requested park),
          type: (string: type of schedule eg. &quot;Extra Magic Hours&quot;, but can be &quot;Event&quot; or &quot;Special Ticketed Event&quot; or other)
        ],
    },
    ...
]</code>
</code></pre><h2 id="park-object-values">Park Object values</h2><p>There are some values available on each park object that may be useful.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Variable</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">Name of the park</td>
</tr>
<tr>
<td style="text-align:left">Timezone</td>
<td style="text-align:left">The park&apos;s local timezone</td>
</tr>
<tr>
<td style="text-align:left">LocationString</td>
<td style="text-align:left">This park&apos;s location as a [latitude, longitude] string</td>
</tr>
<tr>
<td style="text-align:left">SupportsWaitTimes</td>
<td style="text-align:left">Does this park&apos;s API support ride wait times?</td>
</tr>
<tr>
<td style="text-align:left">SupportsOpeningTimes</td>
<td style="text-align:left">Does this park&apos;s API support opening hours?</td>
</tr>
<tr>
<td style="text-align:left">SupportsRideSchedules</td>
<td style="text-align:left">Does this park return schedules for rides?</td>
</tr>
<tr>
<td style="text-align:left">FastPass</td>
<td style="text-align:left">Does this park have FastPass (or a FastPass-style service)?</td>
</tr>
<tr>
<td style="text-align:left">FastPassReturnTimes</td>
<td style="text-align:left">Does this park tell you the FastPass return times?</td>
</tr>
<tr>
<td style="text-align:left">Now</td>
<td style="text-align:left">Current date/time at this park (returned as a Moment object)</td>
</tr>
<tr>
<td style="text-align:left">LangOptions</td>
<td style="text-align:left">What languages does this park support?</td>
</tr>
</tbody>
</table>
<pre><code><code class="source-code prettyprint">import tpapi from &apos;@alexvv13/tpapi&apos;;

// construct our park objects and keep them in memory for fast access later
const Parks = {};
for (const park in tpapi.parks) {
  Parks[park] = new tpapi.parks[park]();
}

// print each park&apos;s name, current location, and timezone
for (const park in Parks) {
  console.log(`* ${Parks[park].Name} [${Parks[park].LocationString}]: (${Parks[park].Timezone})`);
}</code>
</code></pre><p>Prints:</p>
<p><!-- START_PARK_TIMEZONE_LIST -->
</p>
<ul>
<li>Efteling [51.65098350641645, 5.049916835374731]: (Europe/Amsterdam)</li>
<li>Europa-Park [48.266140769976715, 7.722050520358709]: (Europe/Berlin)</li>
<li>Walibi Belgium [50.7038852, 4.5960371]: (Europe/Brussels)</li>
<li>Walibi Holland [52.4390338, 5.7665651]: (Europe/Amsterdam)</li>
</ul>
<p><!-- END_PARK_TIMEZONE_LIST -->
</p>
<h2 id="tasks">Tasks</h2><ul>
<li>[ ] Add more parks</li>
<li>[X] Multi language support</li>
<li>[ ] Multiple Queue entities support</li>
<li>[X] Completely purge file-system</li>
<li>[X] Merge shared tasks to one function</li>
<li>[X] Generate a better infrastructure</li>
</ul>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
